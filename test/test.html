<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Untitled</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <script src="https://cdn.tailwindcss.com"></script>
        <!-- Place favicon.ico in the root directory -->
        <script defer type="text/javascript" src="../src/main.js" ></script>
        <script type="text/javascript">
         function toggle(){
            let pop = document.getElementById("popup");
            if(pop.style.display == "flex"){
                pop.style.display = "none"
            }
             else
                pop.style.display = "flex"
         }
        </script>

    </head>
    <body class="flex flex-col gap-2 bg-gray-200 w-screen h-screen " >
        <template rapid-name="popup" >
            <script type="text/javascript">
                class Popup extends Component{
                    onComponentLoad() {
                        let outer = this.getChild("popup");
                        outer.style.display="none"
                    }
                }
            </script>
            <div child-id="popup" id={id} class="fixed w-screen h-screen bg-black bg-opacity-25 flex items-center justify-center" >
                <div class="w-[400px] h-[400px] bg-slate-200 rounded-lg flex p-5 flex-col items-center">
                    <h1>{title}</h1>
                    {children}
                    <but onclick="toggle()" >Toggle popup</but>
                </div>
            </div>
        </template>

        <template rapid-name="carding" >
            <script defer >
                class Carding extends Component{
                    onComponentLoad(){
                        var thing = this.getChild("panel");
                        thing.style.display = "none";
                    }
                    set_open(state) {
                        var panel = this.getChild("panel");
                        var close = this.getChild("close");

                        if(state){
                            panel.style.display = "block";
                            close.style.display = "none";
                        }
                        else{
                            panel.style.display = "none";
                            close.style.display = "block";
                       }
                    }
                    setValue(value){
                        this.getChild("title").innerHTML = value;
                    }
                }
            </script>

            <div class="bg-green-500 p-5 rouneded-lg flex flex-col items-center w-[400px] {name}" >
                <h1 child-id="title" >{name}</h1>
                <but child-id="close" onclick="self.set_open(true)" >open</but>

                <div child-id="panel" class="bg-gray-200 p-5 rounded-md">
                    <h1>Close me</h1>
                    <but onclick="self.set_open(false)"  >Close</but>
                    <h2>Set title</h2>
                    <input type="" placeholder="new title" oninput="self.value = event.target.value" />
                    <but onclick="self.setValue(self.value)" >set title</but>
                </div>
            </div>
        </template>


        <template rapid-name="but">
            <div onclick="{onclick}" class="hover:scale-90 cursor-pointer duration-150 rounded-lg bg-gray-500 p-2 " >
                <h1>{children}</h1>
            </div>
        </template>


        <popup id="popup" title="This is a popup" >
            <carding name="alfred" ></carding>
        </popup>
        <but onclick="toggle()" >Turn on popup</but>

            <carding name="alfred" ></carding>


    </body>
</html>
